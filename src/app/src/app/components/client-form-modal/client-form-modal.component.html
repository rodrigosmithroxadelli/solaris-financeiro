<ion-content class="client-modal">
  <form (ngSubmit)="save()" class="client-form">
    <div class="form-header">
      <div class="header-icon">
        <ion-icon name="people-outline"></ion-icon>
      </div>
      <div class="header-text">
        <h2>{{ isEditMode ? 'Editar Cliente' : 'Novo Cliente' }}</h2>
        <p>Preencha os dados do cadastro</p>
      </div>
      <ion-button *ngIf="!isEditMode" class="header-close" fill="clear" type="button" (click)="dismiss()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </div>

    <div class="form-group">
      <div class="form-label">Informações principais</div>
      <ion-item class="form-item" lines="none">
        <ion-label position="stacked">Nome Completo *</ion-label>
        <ion-input type="text" [(ngModel)]="clientForm.name" name="name" required></ion-input>
      </ion-item>
      <ion-item class="form-item" lines="none">
        <ion-label position="stacked">WhatsApp *</ion-label>
        <ion-input type="tel" [(ngModel)]="clientForm.whatsapp" name="whatsapp" required></ion-input>
      </ion-item>
      <ion-item class="form-item" lines="none">
        <ion-label position="stacked">Email</ion-label>
        <ion-input type="email" [(ngModel)]="clientForm.email" name="email"></ion-input>
      </ion-item>
    </div>

    <div class="section-divider"></div>

    <div class="form-group">
      <div class="form-label">Veículos</div>
      <ion-button class="inline-button" fill="clear" type="button" (click)="addVehicle()">
        <ion-icon name="add-circle" slot="start"></ion-icon>
        Adicionar veículo
      </ion-button>
      <div *ngIf="!clientForm.vehicles || clientForm.vehicles.length === 0" class="empty-state">
        <p>Nenhum veículo adicionado.</p>
      </div>
      <ion-list class="vehicles-list" *ngIf="clientForm.vehicles && clientForm.vehicles.length > 0">
        <ion-item class="vehicle-item" *ngFor="let vehicle of clientForm.vehicles; let i = index">
          <ion-label>
            <div class="vehicle-title">{{ vehicle.plate }}</div>
            <div class="vehicle-subtitle">{{ vehicle.brand }} {{ vehicle.model }} ({{ vehicle.color }})</div>
          </ion-label>
          <ion-button fill="clear" color="danger" slot="end" (click)="removeVehicle(i)">
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-list>
    </div>

    <ion-button expand="block" type="submit" class="submit-button" [disabled]="!clientForm.name || !clientForm.whatsapp">
      {{ isEditMode ? 'Salvar alterações' : 'Salvar cliente' }}
    </ion-button>
  </form>
</ion-content>
